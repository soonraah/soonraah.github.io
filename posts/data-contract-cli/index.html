<!doctype html><html lang=ja dir=auto><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-NSEGH2YT17"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NSEGH2YT17")</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ | Froglog</title>
<meta name=keywords content="data contracts"><meta name=description content="ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦
Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚
Data Contract CLI ã¨ã¯ï¼Ÿ
datacontract/datacontract-cli
Data Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚
data contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚
ãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚
Data Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚
Data Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ datacontract/datacontract-specification ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚
ã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚

lint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ
data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º
JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚"><meta name=author content="soonraah"><link rel=canonical href=https://soonraah.github.io/posts/data-contract-cli/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://soonraah.github.io/favicon2.ico><link rel=icon type=image/png sizes=16x16 href=https://soonraah.github.io/image/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://soonraah.github.io/image/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://soonraah.github.io/static/image/favicon/apple-touch-icon.png><link rel=mask-icon href=https://soonraah.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://soonraah.github.io/posts/data-contract-cli/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://soonraah.github.io/posts/data-contract-cli/"><meta property="og:site_name" content="Froglog"><meta property="og:title" content="Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥"><meta property="og:description" content="ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦ Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚
Data Contract CLI ã¨ã¯ï¼Ÿ datacontract/datacontract-cli
Data Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚
data contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚
ãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚
Data Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚
Data Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ datacontract/datacontract-specification ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚
ã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚
lint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚"><meta property="og:locale" content="ja"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-09T22:30:00+09:00"><meta property="article:modified_time" content="2024-05-09T22:30:00+09:00"><meta property="article:tag" content="Data Contracts"><meta property="og:image" content="https://soonraah.github.io/image/dalle/data_contracts.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://soonraah.github.io/image/dalle/data_contracts.jpg"><meta name=twitter:title content="Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥"><meta name=twitter:description content="ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦
Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚
Data Contract CLI ã¨ã¯ï¼Ÿ
datacontract/datacontract-cli
Data Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚
data contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚
ãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚
Data Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚
Data Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ datacontract/datacontract-specification ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚
ã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚

lint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ
data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º
JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://soonraah.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥","item":"https://soonraah.github.io/posts/data-contract-cli/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥","name":"Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥","description":"ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦ Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚\nData Contract CLI ã¨ã¯ï¼Ÿ datacontract/datacontract-cli\nData Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚\ndata contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚\nãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚\nData Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚\nData Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ datacontract/datacontract-specification ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚\nlint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚\n","keywords":["data contracts"],"articleBody":"ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦ Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚\nData Contract CLI ã¨ã¯ï¼Ÿ datacontract/datacontract-cli\nData Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚\ndata contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚\nãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚\nData Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚\nData Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ datacontract/datacontract-specification ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚\nlint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚\ndatacontract/datacontract-cli ã‚ˆã‚Š\nData Contract CLI ã®é–‹ç™ºè€…ãŒä½•ã‚’è€ƒãˆã¦ã„ã‚‹ã‹ã€ã“ã®å›³ã‹ã‚‰æ¨æ¸¬ã§ãã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã®ã§å¾Œã»ã©è€ƒå¯Ÿã—ãŸã„ã€‚\nData Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹ å‰æ æ‰‹å…ƒã«å€‹äººé–‹ç™ºç”¨ã® BigQuery ã® table ãŒã‚ã£ãŸã®ã§ã€ã“ã‚Œã«ã¤ã„ã¦ data contract ã‚’ç”¨æ„ã—ã¦ Data Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚\nå€‹äººã® MoneyForward ã®æƒ…å ±ã‚’å–ã‚Šè¾¼ã‚“ã§ã„ã‚‹ table ã§ã‚ã‚Šã€åæ”¯è©³ç´°ã®ã‚«ãƒ†ã‚´ãƒªã‚’æ‰±ã† table ã§ã‚ã‚‹ã€‚\ndata contract (YAML ãƒ•ã‚¡ã‚¤ãƒ«) ã®ä½œæˆã¯åŸºæœ¬çš„ã«ã¯ best practice ã«å¾“ã†ã€‚\ndata contract ã®ä½œæˆå¾Œã¯ export ã‚„å¤‰æ›´ã®æ¤œå‡ºãªã©ã‚’è©¦ã—ã¦ã¿ã‚‹ã€‚\næº–å‚™ ä»Šå›ã¯ Poetry ã§ Python ç’°å¢ƒã‚’ç”¨æ„ã—ãŸã€‚\ndatacontract-cli ãŠã‚ˆã³ BigQuery ã‚’æ‰±ã†ã®ã«å¿…è¦ã¨ãªã‚‹ google-cloud-bigquery-storage ã‚’ install ã—ã¦ãŠãã€‚\n[tool.poetry.dependencies] python = \"^3.10\" datacontract-cli = \"^0.10.3\" google-cloud-bigquery-storage = \"^2.24.0\" ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã€‚\n$ datacontract --version 0.10.3 DDL ã‹ã‚‰ã® import ã—ã¦ data contract ã‚’ä½œæˆ ã¾ãš data contract ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\ndata contract ã¯ YAML ãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§ä»•æ§˜ã‚’è¦‹ãªãŒã‚‰ä¸€ã‹ã‚‰æ›¸ãã“ã¨ã‚‚ã§ãã‚‹ãŒã€æ—¢å­˜ã® table ãªã©ãŒã‚ã‚‹å ´åˆã¯ import ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nã¡ãªã¿ã« v0.10.3 ã®æ™‚ç‚¹ã§å¯¾å¿œã—ã¦ã„ã‚‹ import ã®ã‚½ãƒ¼ã‚¹ã¯ sql, avro, glue ã®3ã¤ã€‚\nBigQuery ã§ã¯ INFORMATION_SCHEMA.TABLES ã‹ã‚‰æ—¢å­˜ table ã® DDL ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ãã‚Œã‚’åˆ©ç”¨ã—ã¦ money_forward_main_group.sql ã‚’ç”¨æ„ã—ãŸã€‚\nCREATE TABLE `\u003cPROJECT_ID\u003e.\u003cDATASET_ID\u003e.money_forward_main_group` ( mf_main_group_id INT64, name STRING, is_income BOOL ); ã“ã® DDL ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ import ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Š data contract ã‚’ä½œæˆã™ã‚‹ã€‚\n$ datacontract import --format sql --source money_forward_main_group.sql \u003e datacontract_v1.yml ä½œæˆã•ã‚ŒãŸ datacontract_v1.yml ã®ä¸­ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\ndataContractSpecification: 0.9.3 id: my-data-contract-id info: title: My Data Contract version: 0.0.1 models: money_forward_main_group`: type: table fields: mf_main_group_id: type: integer name: type: string is_income: type: boolean ã“ã®æ™‚ç‚¹ã§ä¸€åº¦ lint ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ã—ã¦ãŠãã€‚\ndatacontract lint datacontract_v1.yml WARNING:root:Data Contract YAML is invalid. Validation error: data.models must be named by propertyName definition ERROR:root:Run operation failed: [lint] Check that data contract YAML is valid - None - failed - data.models must be named by propertyName definition - datacontract â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ failed â”‚ Check that data contract YAML is valid â”‚ â”‚ data.models must be named by propertyName â”‚ â”‚ â”‚ â”‚ â”‚ definition â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸ”´ data contract is invalid, found the following errors: 1) data.models must be named by propertyName definition ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚\nå®Ÿã¯ã“ã®æ™‚ç‚¹ã§ datacontract_v1.yml ã«ã„ãã¤ã‹å•é¡ŒãŒã‚ã‚Šã€ä¿®æ­£ã™ã‚‹ã“ã¨ã«ã€‚\nä¸è¦ãª â€œ`â€ ãŒå«ã¾ã‚Œã¦ã„ã‚‹ servers ãƒ–ãƒ­ãƒƒã‚¯ãŒãªã„ (ç¢ºã‹ã« DDL ã‚’ä¸ãˆã‚‹ã ã‘ã ã¨ BigQuery ãªã®ã‹ Snowflake ãªã®ã‹ã‚ã‹ã‚‰ã‚“ãªâ€¦) æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ datacontract_v2.yml ã‚’ä½œã£ãŸã€‚\n@@ -3,8 +3,13 @@ info: title: My Data Contract version: 0.0.1 +servers: + dev: + type: bigquery + project: + dataset: models: - money_forward_main_group`: + money_forward_main_group: type: table fields: mf_main_group_id: å†åº¦ lint ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨æˆåŠŸã—ãŸã€‚\nãŸã ã— description ãŒãªã„æ—¨ã® warning ãŒå‡ºã¦ã„ã‚‹ã€‚\ntable ã‚„ column ã® description ã‚„åˆ¶ç´„äº‹é …ã‚’è¿½åŠ ã—ã¦ datacontract_v3.yml ã¨ã™ã‚‹ã€‚\n@@ -3,6 +3,9 @@ info: title: My Data Contract version: 0.0.1 + description: | + MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚ + ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚ servers: dev: type: bigquery @@ -11,10 +14,18 @@ models: money_forward_main_group: type: table + description: MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›® fields: mf_main_group_id: + description: å¤§é …ç›® ID type: integer + required: true + primary: true + unique: true name: + description: å¤§é …ç›®ã®é …ç›®å type: string + required: true is_income: + description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false type: boolean lint ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒæˆåŠŸã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚\n$ datacontract lint datacontract_v3.yml â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ passed â”‚ Data contract is syntactically valid â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Field pattern is correct regex' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Objects have descriptions' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Field references existing field' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Example(s) match model' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Fields use valid constraints' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'Quality check(s) use model' â”‚ â”‚ â”‚ â”‚ passed â”‚ Linter 'noticePeriod in ISO8601 format' â”‚ â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸŸ¢ data contract is valid. Run 8 checks. Took 0.304237 seconds. åˆå›ãƒ†ã‚¹ãƒˆ æ¬¡ã« test ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nã¡ãªã¿ã« test ã§ã¯ BiqQuery ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã€ç’°å¢ƒå¤‰æ•° DATACONTRACT_BIGQUERY_ACCOUNT_INFO_JSON_PATH ã«èªè¨¼æƒ…å ±ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚\n$ datacontract test datacontract_v3.yml Testing datacontract_v3.yml Column,Event,Details is_income,:icon-fail: Type Mismatch, Expected Type: boolean; Actual Type: BOOL Type Mismatch, Expected Type: boolean; Actual Type: BOOL â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ passed â”‚ Check that field mf_main_group_id is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field mf_main_group_id has type integer â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name has type string â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field is_income is present â”‚ â”‚ â”‚ â”‚ failed â”‚ Check that field is_income has type boolean â”‚ â”‚ Type Mismatch, Expected Type: boolean; Actual â”‚ â”‚ â”‚ â”‚ â”‚ Type: BOOL â”‚ â”‚ passed â”‚ Check that required field mf_main_group_id has no null values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that required field name has no null values â”‚ name â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸ”´ data contract is invalid, found the following errors: 1) Type Mismatch, Expected Type: boolean; Actual Type: BOOL ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚\ncolumn is_income ã®å‹ãŒ boolean ã§ã¯ãªã BOOL ã ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚\nç¢ºã‹ã« BiqQuery ã¨ã—ã¦ã®å‹ã¯ BOOL ã§ã‚ã‚‹ãŒã€ä¸€æ–¹ã§ data contracts ã®ä»•æ§˜ã¨ã—ã¦ã¯ boolean ã—ã‹æŒ‡å®šã§ããªã„ã€‚\nãƒã‚°ã£ã½ã„ã®ã§ã„ã£ãŸã‚“ is_income ã®å‹æŒ‡å®šã‚’ã¯ãšã—ã¦ãŠãâ€¦\nå‡ºåŠ›ã•ã‚ŒãŸå†…å®¹ã‚’è¦‹ã‚‹ã¨ã©ã†ã„ã£ãŸã“ã¨ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‹ãŒã‚ã‹ã‚‹ã€‚\nã“ã®æ™‚ç‚¹ã§ã¯ column ã®å­˜åœ¨ãŠã‚ˆã³å‹ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã¦ã€ã•ã‚‰ã«åˆ¶ç´„äº‹é …ã‚’è¨˜è¼‰ã—ãŸ column ã«ã¤ã„ã¦ã¯ãã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ  æ¬¡ã« data contract ã« examples ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã€‚\nåå‰ã®ã¨ãŠã‚Šã§ãƒ‡ãƒ¼ã‚¿ã®ä¾‹ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã¾ãš data contract ã‚’å®£è¨€ã—ã¦é–‹ç™ºã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€ä¾‹ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã¯ã¨ã¦ã‚‚åŠ©ã‹ã‚‹ã€‚\næ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ datacontract_v4.yml ã‚’ä½œã£ãŸã€‚\n@@ -28,4 +28,14 @@ required: true is_income: description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false - type: boolean + # type mismatch ã«ãªã‚‹ãƒã‚°ï¼ŸãŒã‚ã‚‹ãŸã‚ boolean å‹ã®ãƒã‚§ãƒƒã‚¯ã¯é™¤å¤– + # type: boolean +examples: + - type: csv + description: money_forward_main_group ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¾‹ã€‚ + model: money_forward_main_group + data: | + mf_main_group_id,name,is_income + 1,\"åå…¥\",true + 2,\"é£Ÿè²»\",false + 3,\"æ—¥ç”¨å“\",false ã‚ªãƒ—ã‚·ãƒ§ãƒ³ --examples ã‚’ã¤ã‘ã¦ test ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€examples ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚\n$ datacontract test --examples datacontract_v4.yml Testing datacontract_v4.yml â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ passed â”‚ Check that field mf_main_group_id is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field is_income is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that required field mf_main_group_id has no null values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that required field name has no null values â”‚ name â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸŸ¢ data contract is valid. Run 6 checks. Took 0.232013 seconds. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ  quality ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚\nv0.10.3 ã®æ™‚ç‚¹ã§ã¯ SodaCL, Monte Carlo, greate expectation ã®è¨˜æ³•ã§å“è³ªãƒã‚§ãƒƒã‚¯ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã“ã§ã¯ SodaCL ã®è¨˜æ³•ã§ table ã®è¡Œæ•°ãŒ1ä»¶ä»¥ä¸Šã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ç°¡å˜ãªãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ datacontract_v5.yml ã¨ã™ã‚‹ã€‚\n@@ -39,3 +39,8 @@ 1,\"åå…¥\",true 2,\"é£Ÿè²»\",false 3,\"æ—¥ç”¨å“\",false +quality: + type: SodaCL + specification: + checks for money_forward_main_group: + - row_count \u003e 0 examples ã¨ BigQuery ãã‚Œãã‚Œã«å¯¾ã—ã¦ test ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚\n$ datacontract test --examples datacontract_v5.yml Testing datacontract_v5.yml â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ passed â”‚ Check that field mf_main_group_id is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field is_income is present â”‚ â”‚ â”‚ â”‚ passed â”‚ row_count \u003e 0 â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that required field mf_main_group_id has no null values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that required field name has no null values â”‚ name â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸŸ¢ data contract is valid. Run 7 checks. Took 0.48302 seconds. $ datacontract test datacontract_v5.yml Testing datacontract_v5.yml â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ Result â”‚ Check â”‚ Field â”‚ Details â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ passed â”‚ Check that field mf_main_group_id is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field mf_main_group_id has type integer â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name is present â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field name has type string â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that field is_income is present â”‚ â”‚ â”‚ â”‚ passed â”‚ row_count \u003e 0 â”‚ â”‚ â”‚ â”‚ passed â”‚ Check that required field mf_main_group_id has no null values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚ â”‚ â”‚ passed â”‚ Check that required field name has no null values â”‚ name â”‚ â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ ğŸŸ¢ data contract is valid. Run 9 checks. Took 5.690055 seconds. è¡Œæ•° (row_count) ã®ãƒã‚§ãƒƒã‚¯ãŒå¢—ãˆã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã€‚\nã“ã“ã¾ã§ã®ã¨ã“ã‚ã§ data contract (YAML) ã¯ã„ã£ãŸã‚“å®Œæˆã¨ã™ã‚‹ã€‚\nã“ã®æ™‚ç‚¹ã§ã®å…¨ä½“åƒã‚’è¨˜è¼‰ã—ã¦ãŠãã€‚\ndataContractSpecification: 0.9.3 id: my-data-contract-id info: title: My Data Contract version: 0.0.1 description: | MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚ servers: dev: type: bigquery project: dataset: models: money_forward_main_group: type: table description: MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›® fields: mf_main_group_id: description: å¤§é …ç›® ID type: integer required: true primary: true unique: true name: description: å¤§é …ç›®ã®é …ç›®å type: string required: true is_income: description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false # type mismatch ã«ãªã‚‹ãƒã‚°ï¼ŸãŒã‚ã‚‹ãŸã‚ boolean å‹ã®ãƒã‚§ãƒƒã‚¯ã¯é™¤å¤– # type: boolean examples: - type: csv description: money_forward_main_group ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¾‹ã€‚ model: money_forward_main_group data: | mf_main_group_id,name,is_income 1,\"åå…¥\",true 2,\"é£Ÿè²»\",false 3,\"æ—¥ç”¨å“\",false quality: type: SodaCL specification: checks for money_forward_main_group: - row_count \u003e 0 ã“ã“ã§ä½œã£ãŸ data contract ã¯ãƒ•ãƒ«ã®è¨˜è¼‰ã§ã¯ãªã„ã€‚\nä¾‹ãˆã° servicelevels ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ SLA ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\ndata contract ã®ã™ã¹ã¦ã®ä»•æ§˜ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯ä»•æ§˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã®ã“ã¨ã€‚\nexport ã‚’è©¦ã™ JSON Schema data contract ãŒã§ããŸã¨ã“ã‚ã§ export ã‚’è©¦ã—ã¦ã„ããŸã„ã€‚\nv0.10.3 ã§ã¯14ç¨®é¡ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¯¾ã—ã¦ã® export ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€ã“ã“ã§ã¯ãã®ã†ã¡ã®ã„ãã¤ã‹ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚\nã¾ãšã¯ JSON Schema ã§å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚\n$ datacontract export --format jsonschema datacontract_v5.yml { \"$schema\": \"http://json-schema.org/draft-07/schema#\", \"type\": \"object\", \"properties\": { \"mf_main_group_id\": { \"type\": \"integer\", \"unique\": true }, \"name\": { \"type\": \"string\" }, \"is_income\": {} }, \"required\": [ \"mf_main_group_id\", \"name\" ] } JSON Schema ã®è¨˜æ³•ã§ãƒ¢ãƒ‡ãƒ«ãŒè¡¨ç¾ã•ã‚ŒãŸã‚‚ã®ãŒæ¨™æº–å‡ºåŠ›ã•ã‚ŒãŸã€‚\nåŒæ§˜ã« Avro, Protobuf ãªã©ã®å½¢å¼ã§ã‚‚ export ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nãƒ‡ãƒ¼ã‚¿åŸºç›¤çš„ãªè©±ã‚’ã™ã‚‹ã¨ã€å–ã‚Šè¾¼ã¿ã®å¯¾è±¡ã§ã‚ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (data provider) ã‹ã‚‰é€ã‚‰ã‚Œã¦ãã‚‹ãƒ­ã‚°ã¯ JSON å½¢å¼ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚‹ã€‚\ndata contract ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã¨ãƒ‡ãƒ¼ã‚¿åŸºç›¤å´ã§åˆæ„ã—ã¦ãŠã‘ã°ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ãƒ­ã‚°ç”Ÿæˆæ™‚ã« JSON Schema ã§ãƒ­ã‚°ã« validation ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã‚Œã«ã‚ˆã‚Šãƒ­ã‚°ã® schema ã®æ„å›³ã—ãªã„å¤‰æ›´ã‚’é˜²ãé‹ç”¨ãŒå¯èƒ½ã«ãªã‚‹ã ã‚ã†ã€‚\ndbt dbt ã®å½¢å¼ã§ export ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\ndbt ã® YAML ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚\n$ datacontract export --format dbt --server bigquery datacontract_v5.yml version: 2 models: - name: money_forward_main_group config: meta: data_contract: my-data-contract-id materialized: table contract: enforced: true description: MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›® columns: - data_type: NUMBER description: å¤§é …ç›® ID constraints: - type: not_null - type: unique name: mf_main_group_id - data_type: STRING description: å¤§é …ç›®ã®é …ç›®å constraints: - type: not_null name: name - description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false name: is_income data_type ãŒå¾®å¦™ã§ BigQuery ã®å‹å®šç¾©ã«ãªã£ã¦ã„ãªã„ã€‚\n--server bigquery ã‚’ä¸ãˆã¦ã„ã‚‹ã®ã§é…æ…®ã—ã¦ã»ã—ã„ã¨ã“ã‚ã§ã¯ã‚ã‚‹ã€‚\nsources ç”¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å½¢å¼ã§ã‚‚ export ã§ãã‚‹ã€‚\n$ datacontract export --format dbt-sources --server bigquery datacontract_v5.yml version: 2 sources: - name: my-data-contract-id tables: - name: money_forward_main_group description: MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›® columns: - tests: - dbt_expectations.dbt_expectations.expect_column_values_to_be_of_type: column_type: NUMBER - not_null - unique description: å¤§é …ç›® ID name: mf_main_group_id - tests: - dbt_expectations.dbt_expectations.expect_column_values_to_be_of_type: column_type: STRING - not_null description: å¤§é …ç›®ã®é …ç›®å name: name - description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false name: is_income description: 'MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚ ' staging ç”¨ã® SQL ã®å½¢å¼ã® export ã‚‚ã‚ã‚‹ã€‚\n$ datacontract export --format dbt-staging-sql --server bigquery datacontract_v5.yml select mf_main_group_id, name, is_income from {{ source('my-data-contract-id', 'money_forward_main_group') }} ã“ã®ã‚ˆã†ã«ã„ãã¤ã‹ã® dbt ã®å½¢å¼ã§å‡ºåŠ›ã§ãã‚‹ãŒã€å¾®å¦™ãªéƒ¨åˆ†ãŒã‚ã‚‹ã®ã§ã“ã®ã¾ã¾ data contract ã‚’ SSoT ã¨ã—ã¦ dbt ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ CI ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã¨ã„ã†é‹ç”¨ã¯ç¾æ™‚ç‚¹ã§ã¯é›£ã—ã„ã ã‚ã†ã€‚\nã¾ãŸãƒªãƒƒãƒãªãƒ†ã‚¹ãƒˆãªã©ã‚‚è¡¨ç¾ã§ããªã„ãŸã‚ã€dbt ã‚’ãŒã£ã¤ã‚Šä½¿ã£ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã«ã¯ç‰©è¶³ã‚Šãªã•ãŒã‚ã‚‹ã¨æ€ã‚ã‚Œã‚‹ã€‚\ndata contract ã‚’ã¾ãšä½œã‚Šã€ãã‚Œã‚’ã‚‚ã¨ã« dbt ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¨ãã®ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹ç”¨é€”ãªã‚‰ç¾æ™‚ç‚¹ã§ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œãªã„ã€‚\nHTML HTML å½¢å¼ã§ export ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\nãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ data contract ã‚’ web ã§è¦‹ã›ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã ã‚ã†ã€‚\n$ datacontract export --format html datacontract_v5.yml \u003e money_forward_main_group.html HTML ã§ã® export ä¾‹\né ‘å¼µã‚Œã°ã“ã‚Œã§ data catalog ã‚’ä½œã‚‹ã“ã¨ã‚‚ã§ããã†ã€‚\nã¾ãŸä»Šå›ã® data contract ã«ã¯å«ã¾ã‚Œã¦ã„ãªã„ãŒã€å‰è¿°ã® servicelevels ãƒ–ãƒ­ãƒƒã‚¯ãŒã‚ã‚Œã° web ä¸Šã§ SLA ã‚’ç¤ºã›ãŸã‚Šã§ãã¦è‰¯ã•ãã†ã ã€‚\nè€ƒå¯Ÿ Data Contract CLI ã§ä½•ãŒã§ãã‚‹ã‹ãŒã‚ã‹ã£ãŸã¨ã“ã‚ã§æœ€åˆã®å›³ã‚’å†æ²ã€‚\ndatacontract/datacontract-cli ã‚ˆã‚Š\nã“ã®å›³ã‹ã‚‰ Data Contract CLI ã¨ã—ã¦ã¯ data contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãªé‹ç”¨ã‚’è€ƒãˆã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚\nã¾ãš data provider ã¨ data consumer ã®åˆæ„ã®ã‚‚ã¨ã«å®£è¨€çš„ã« data contracts ã‚’ä½œæˆã™ã‚‹ã€‚\nãã‚Œã«åŸºã¥ãã€ãã‚Œãã‚Œ data provider ã¨ data consumer ã§ä½¿ã‚ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ç”¨ã« data contracts ã‹ã‚‰å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ã„ãã€‚\nä¾‹ãˆã° data provider ã§ã‚ã‚‹ application å‘ã‘ã«ã¯ãƒ­ã‚°ã® validation ç”¨ã« JSON Schema ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚\ndata consumer ã§ã‚ã‚‹ DWH å‘ã‘ã«ã¯ dbt ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€ãªã©ã€‚\nã¾ãŸã€data contract ã«è¨˜è¼‰ã®æƒ…å ±ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nç°¡å˜ãª column ã®åˆ¶ç´„ã‹ã‚‰ã€SodaCL ãªã©ã‚’ä½¿ã£ãŸã‚ˆã‚Šé«˜åº¦ãªå“è³ªãƒã‚§ãƒƒã‚¯ã¾ã§ã€‚\nãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ data contract ã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹ã€‚\nã“ã®ã‚ˆã†ã«ã¾ãš data contract ã‚ã‚Šãã§ã€ãƒ¢ãƒ‡ãƒ«ã®ãƒ¡ã‚¿æƒ…å ±ã¨ã—ã¦ã¯ãã‚Œã‚’ SSoT ã¨ã—ã€data provider / consumer ã§å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ CI ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã¨ã„ã†æœªæ¥ãŒè¦‹ãˆã¦ãã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€‚\nãŸã ã—ãã®æœªæ¥ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®èª²é¡Œã‚‚ç¾çŠ¶ã§ã¯å¤šã„ã€‚\nData Contract CLI ã®ç›¸äº’é‹ç”¨æ€§ (interoperatbility) ãŒæœ€ã‚‚å¤§ããªãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‹ã ã‚ã†ã€‚\nä¾‹ãˆã°æƒ³å®šã™ã‚‹ dbt ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¸€ç™ºã§ä½œã‚Œã‚‹ã‹ã€package ã‚’ä½¿ã£ãŸãƒªãƒƒãƒãªãƒ†ã‚¹ãƒˆãŒæ›¸ã‘ã‚‹ã‹ã€etc.\nãã‚‚ãã‚‚å‰è¿°ã—ãŸã‚ˆã†ã«ãƒã‚°ã£ã½ã„æŒ™å‹•ã‚„å¾®å¦™ãªæŒ™å‹•ã‚‚ã‚ã‚Šã€ã“ã®ãƒ„ãƒ¼ãƒ«è‡ªä½“ãŒã¾ã ç™ºå±•é€”ä¸Šã¨ã„ã†æ„ŸãŒã‚ã‚‹ã€‚\nã“ã‚Œã‹ã‚‰æ™®åŠã—ã¦ã„ãã‹ã¨ã„ã†ã®ã¯ä»Šã®ã¨ã“ã‚ä½•ã¨ã‚‚è¨€ãˆãªã„ã€‚\nã¡ãªã¿ã«ä½œè€…ã®1äººã¯ Data Mesh Manager ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ¶ä½œè€…ã§ã‚ã‚Šã€(ã“ã“ã¾ã§ã®ã¨ã“ã‚ã§ã¯è§¦ã‚Œã¦ã„ãªã‹ã£ãŸãŒ) Data Contract CLI ã«ã¯ã“ã® Data Mesh Manager ã¨ã®é€£æºæ©Ÿèƒ½ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã€‚\ndata contract ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ä¸–ç•Œã®ãƒ“ã‚¸ãƒ§ãƒ³ã¯ã¨ã¦ã‚‚é¢ç™½ã„ã¨æ€ã£ãŸã®ã§ã€ã„ã„æ–¹å‘ã§ãƒ„ãƒ¼ãƒ«ãŒç™ºå±•ã—ã¦ã„ãã¨ã†ã‚Œã—ã„ã€‚\n","wordCount":"1841","inLanguage":"ja","image":"https://soonraah.github.io/image/dalle/data_contracts.jpg","datePublished":"2024-05-09T22:30:00+09:00","dateModified":"2024-05-09T22:30:00+09:00","author":{"@type":"Person","name":"soonraah"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://soonraah.github.io/posts/data-contract-cli/"},"publisher":{"@type":"Organization","name":"Froglog","logo":{"@type":"ImageObject","url":"https://soonraah.github.io/favicon2.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://soonraah.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://soonraah.github.io/image/brand/favicon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://soonraah.github.io/about/ title=About><span>About</span></a></li><li><a href=https://soonraah.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://soonraah.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://soonraah.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://soonraah.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://soonraah.github.io/>ãƒ›ãƒ¼ãƒ </a>&nbsp;Â»&nbsp;<a href=https://soonraah.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥</h1><div class=post-meta><span title='2024-05-09 22:30:00 +0900 JST'>5æœˆ 9, 2024</span>&nbsp;Â·&nbsp;soonraah</div></header><figure class=entry-cover><img loading=eager src=https://soonraah.github.io/image/dalle/data_contracts.jpg alt="data contracts"><p>Image by OpenAI DALLÂ·E</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>ç›®æ¬¡</span></summary><div class=inner><ul><li><a href=#%e3%81%93%e3%81%ae%e3%83%9d%e3%82%b9%e3%83%88%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 aria-label=ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦>ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦</a></li><li><a href=#data-contract-cli-%e3%81%a8%e3%81%af aria-label="Data Contract CLI ã¨ã¯ï¼Ÿ">Data Contract CLI ã¨ã¯ï¼Ÿ</a></li><li><a href=#data-contract-cli-%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e3%81%bf%e3%82%8b aria-label="Data Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹">Data Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹</a><ul><li><a href=#%e5%89%8d%e6%8f%90 aria-label=å‰æ>å‰æ</a></li><li><a href=#%e6%ba%96%e5%82%99 aria-label=æº–å‚™>æº–å‚™</a></li><li><a href=#ddl-%e3%81%8b%e3%82%89%e3%81%ae-import-%e3%81%97%e3%81%a6-data-contract-%e3%82%92%e4%bd%9c%e6%88%90 aria-label="DDL ã‹ã‚‰ã® import ã—ã¦ data contract ã‚’ä½œæˆ">DDL ã‹ã‚‰ã® import ã—ã¦ data contract ã‚’ä½œæˆ</a></li><li><a href=#%e5%88%9d%e5%9b%9e%e3%83%86%e3%82%b9%e3%83%88 aria-label=åˆå›ãƒ†ã‚¹ãƒˆ>åˆå›ãƒ†ã‚¹ãƒˆ</a></li><li><a href=#%e3%83%87%e3%83%bc%e3%82%bf%e4%be%8b%e3%81%ae%e8%bf%bd%e5%8a%a0 aria-label=ãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ >ãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ </a></li><li><a href=#%e3%83%87%e3%83%bc%e3%82%bf%e5%93%81%e8%b3%aa%e3%83%81%e3%82%a7%e3%83%83%e3%82%af%e3%81%ae%e8%bf%bd%e5%8a%a0 aria-label=ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ >ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ </a></li><li><a href=#export-%e3%82%92%e8%a9%a6%e3%81%99 aria-label="export ã‚’è©¦ã™">export ã‚’è©¦ã™</a><ul><li><a href=#json-schema aria-label="JSON Schema">JSON Schema</a></li><li><a href=#dbt aria-label=dbt>dbt</a></li><li><a href=#html aria-label=HTML>HTML</a></li></ul></li></ul></li><li><a href=#%e8%80%83%e5%af%9f aria-label=è€ƒå¯Ÿ>è€ƒå¯Ÿ</a></li></ul></div></details></div><div class=post-content><h2 id=ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦>ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦<a hidden class=anchor aria-hidden=true href=#ã“ã®ãƒã‚¹ãƒˆã«ã¤ã„ã¦>#</a></h2><p>Data Contract CLI ã‚’è§¦ã£ã¦ã¿ãŸã¨ã“ã‚ã€é¢ç™½ã‹ã£ãŸã®ã¨ã“ã‚Œã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦æ€ã†ã¨ã“ã‚ãŒã‚ã£ãŸã®ã§æ›¸ã„ã¦ã¿ã‚‹ã€‚</p><h2 id=data-contract-cli-ã¨ã¯>Data Contract CLI ã¨ã¯ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#data-contract-cli-ã¨ã¯>#</a></h2><p><a href=https://github.com/datacontract/datacontract-cli>datacontract/datacontract-cli</a></p><p>Data Contract CLI ã¯ data contracts ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚</p><p>data contracts ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯<a href=/posts/looked-into-data-contracts/>ä»¥å‰ã®è¨˜äº‹</a>ã§è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”å‚è€ƒã„ãŸã ã‘ã‚Œã°ã¨ã€‚<br>ãŸã ã—ã“ã¡ã‚‰ã®è¨˜äº‹ã¯1å¹´å‰ã®ã‚‚ã®ã§ã‚ã‚Šã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ Data Contract CLI ã®ç™»å ´ãªã©ã‚’å«ã‚ã¦ç¾åœ¨ã§ã¯ data contracts ã‚’å–ã‚Šå·»ãçŠ¶æ³ã‚‚å¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚</p><p>Data Contract CLI ã¯ Python ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€pip ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚<br>ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ v0.10.3 ãŒæœ€æ–°ã§ã‚ã‚Šã€ã“ã®è¨˜äº‹ã®å†…å®¹ã¯ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚</p><p>Data Contract CLI ã§æ‰±ã† data contracts ã¯ YAML ã§å®šç¾©ã•ã‚Œã‚‹å‰æã¨ãªã£ã¦ãŠã‚Šã€ãã®ä»•æ§˜ã¯ <a href=https://github.com/datacontract/datacontract-specification>datacontract/datacontract-specification</a> ã§æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚<br>ã“ã® data contracts ã«å¯¾ã—ã¦ Data Contract CLI ã§ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒè¡Œãˆã‚‹ã€‚</p><ul><li>lint ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯</li><li>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«æ¥ç¶šã—ãŸä¸Šã§ã® schema ã‚„ãƒ‡ãƒ¼ã‚¿å“è³ªã®ãƒ†ã‚¹ãƒˆ</li><li>data contracts ã®ç ´å£Šçš„ãªå¤‰æ›´ã®æ¤œå‡º</li><li>JSON Schema ã‚„ dbt ãªã©ã€ä»–ã®å½¢å¼ã‹ã‚‰ã®ï¼ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</li></ul><p>ä»¥ä¸‹ã®å›³ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã€‚</p><blockquote><figure class=align-center><img loading=lazy src=/image/data-contract-cli/datacontractcli.png#center alt="datacontract/datacontract-cli ã‚ˆã‚Š"><figcaption><p><a href=https://github.com/datacontract/datacontract-cli/tree/v0.10.1>datacontract/datacontract-cli</a> ã‚ˆã‚Š</p></figcaption></figure></blockquote><p>Data Contract CLI ã®é–‹ç™ºè€…ãŒä½•ã‚’è€ƒãˆã¦ã„ã‚‹ã‹ã€ã“ã®å›³ã‹ã‚‰æ¨æ¸¬ã§ãã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã®ã§å¾Œã»ã©è€ƒå¯Ÿã—ãŸã„ã€‚</p><h2 id=data-contract-cli-ã‚’ä½¿ã£ã¦ã¿ã‚‹>Data Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹<a hidden class=anchor aria-hidden=true href=#data-contract-cli-ã‚’ä½¿ã£ã¦ã¿ã‚‹>#</a></h2><h3 id=å‰æ>å‰æ<a hidden class=anchor aria-hidden=true href=#å‰æ>#</a></h3><p>æ‰‹å…ƒã«å€‹äººé–‹ç™ºç”¨ã® BigQuery ã® table ãŒã‚ã£ãŸã®ã§ã€ã“ã‚Œã«ã¤ã„ã¦ data contract ã‚’ç”¨æ„ã—ã¦ Data Contract CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚<br>å€‹äººã® MoneyForward ã®æƒ…å ±ã‚’å–ã‚Šè¾¼ã‚“ã§ã„ã‚‹ table ã§ã‚ã‚Šã€åæ”¯è©³ç´°ã®ã‚«ãƒ†ã‚´ãƒªã‚’æ‰±ã† table ã§ã‚ã‚‹ã€‚</p><p>data contract (YAML ãƒ•ã‚¡ã‚¤ãƒ«) ã®ä½œæˆã¯åŸºæœ¬çš„ã«ã¯ <a href="https://github.com/datacontract/datacontract-cli/tree/v0.10.1?tab=readme-ov-file#best-practices">best practice</a> ã«å¾“ã†ã€‚<br>data contract ã®ä½œæˆå¾Œã¯ export ã‚„å¤‰æ›´ã®æ¤œå‡ºãªã©ã‚’è©¦ã—ã¦ã¿ã‚‹ã€‚</p><h3 id=æº–å‚™>æº–å‚™<a hidden class=anchor aria-hidden=true href=#æº–å‚™>#</a></h3><p>ä»Šå›ã¯ Poetry ã§ Python ç’°å¢ƒã‚’ç”¨æ„ã—ãŸã€‚<br><code>datacontract-cli</code> ãŠã‚ˆã³ BigQuery ã‚’æ‰±ã†ã®ã«å¿…è¦ã¨ãªã‚‹ <code>google-cloud-bigquery-storage</code> ã‚’ install ã—ã¦ãŠãã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>poetry</span>.<span style=color:#a6e22e>dependencies</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>python</span> = <span style=color:#e6db74>&#34;^3.10&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>datacontract-cli</span> = <span style=color:#e6db74>&#34;^0.10.3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>google-cloud-bigquery-storage</span> = <span style=color:#e6db74>&#34;^2.24.0&#34;</span>
</span></span></code></pre></div><p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã€‚</p><pre tabindex=0><code>$ datacontract --version
0.10.3
</code></pre><h3 id=ddl-ã‹ã‚‰ã®-import-ã—ã¦-data-contract-ã‚’ä½œæˆ>DDL ã‹ã‚‰ã® import ã—ã¦ data contract ã‚’ä½œæˆ<a hidden class=anchor aria-hidden=true href=#ddl-ã‹ã‚‰ã®-import-ã—ã¦-data-contract-ã‚’ä½œæˆ>#</a></h3><p>ã¾ãš data contract ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚<br>data contract ã¯ YAML ãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§ä»•æ§˜ã‚’è¦‹ãªãŒã‚‰ä¸€ã‹ã‚‰æ›¸ãã“ã¨ã‚‚ã§ãã‚‹ãŒã€æ—¢å­˜ã® table ãªã©ãŒã‚ã‚‹å ´åˆã¯ import ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚<br>ã¡ãªã¿ã« v0.10.3 ã®æ™‚ç‚¹ã§å¯¾å¿œã—ã¦ã„ã‚‹ import ã®ã‚½ãƒ¼ã‚¹ã¯ <code>sql</code>, <code>avro</code>, <code>glue</code> ã®3ã¤ã€‚</p><p>BigQuery ã§ã¯ <a href="https://cloud.google.com/bigquery/docs/information-schema-tables?hl=ja#tables_view"><code>INFORMATION_SCHEMA.TABLES</code></a> ã‹ã‚‰æ—¢å­˜ table ã® DDL ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ãã‚Œã‚’åˆ©ç”¨ã—ã¦ money_forward_main_group.sql ã‚’ç”¨æ„ã—ãŸã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`&lt;</span>PROJECT_ID<span style=color:#f92672>&gt;</span>.<span style=color:#f92672>&lt;</span>DATASET_ID<span style=color:#f92672>&gt;</span>.money_forward_main_group<span style=color:#f92672>`</span>
</span></span><span style=display:flex><span>(
</span></span><span style=display:flex><span>  mf_main_group_id INT64,
</span></span><span style=display:flex><span>  name STRING,
</span></span><span style=display:flex><span>  is_income BOOL
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>ã“ã® DDL ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ import ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Š data contract ã‚’ä½œæˆã™ã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract import --format sql --source money_forward_main_group.sql &gt; datacontract_v1.yml
</code></pre><p>ä½œæˆã•ã‚ŒãŸ datacontract_v1.yml ã®ä¸­ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>dataContractSpecification</span>: <span style=color:#ae81ff>0.9.3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>id</span>: <span style=color:#ae81ff>my-data-contract-id</span>
</span></span><span style=display:flex><span><span style=color:#f92672>info</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>title</span>: <span style=color:#ae81ff>My Data Contract</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>0.0.1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>models</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>money_forward_main_group`</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>table</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fields</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>mf_main_group_id</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>integer</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>is_income</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>boolean</span>
</span></span></code></pre></div><p>ã“ã®æ™‚ç‚¹ã§ä¸€åº¦ <code>lint</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ã—ã¦ãŠãã€‚</p><pre tabindex=0><code>datacontract lint datacontract_v1.yml 
WARNING:root:Data Contract YAML is invalid. Validation error: data.models must be named by propertyName definition
ERROR:root:Run operation failed: [lint] Check that data contract YAML is valid - None - failed - data.models must be named by propertyName definition - datacontract
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                  â”‚ Field â”‚ Details                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ failed â”‚ Check that data contract YAML is valid â”‚       â”‚ data.models must be named by propertyName          â”‚
â”‚        â”‚                                        â”‚       â”‚ definition                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸ”´ data contract is invalid, found the following errors:
1) data.models must be named by propertyName definition
</code></pre><p>ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚<br>å®Ÿã¯ã“ã®æ™‚ç‚¹ã§ datacontract_v1.yml ã«ã„ãã¤ã‹å•é¡ŒãŒã‚ã‚Šã€ä¿®æ­£ã™ã‚‹ã“ã¨ã«ã€‚</p><ul><li>ä¸è¦ãª &ldquo;`&rdquo; ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li><li><code>servers</code> ãƒ–ãƒ­ãƒƒã‚¯ãŒãªã„<ul><li>(ç¢ºã‹ã« DDL ã‚’ä¸ãˆã‚‹ã ã‘ã ã¨ BigQuery ãªã®ã‹ Snowflake ãªã®ã‹ã‚ã‹ã‚‰ã‚“ãªâ€¦)</li></ul></li></ul><p>æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ datacontract_v2.yml ã‚’ä½œã£ãŸã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#75715e>@@ -3,8 +3,13 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> info:
</span></span><span style=display:flex><span>   title: My Data Contract
</span></span><span style=display:flex><span>   version: 0.0.1
</span></span><span style=display:flex><span><span style=color:#a6e22e>+servers:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  dev:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    type: bigquery
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    project: &lt;PROJECT_ID&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    dataset: &lt;DATASET_ID&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span> models:
</span></span><span style=display:flex><span><span style=color:#f92672>-  money_forward_main_group`:
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+  money_forward_main_group:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>     type: table
</span></span><span style=display:flex><span>     fields:
</span></span><span style=display:flex><span>       mf_main_group_id:
</span></span></code></pre></div><p>å†åº¦ lint ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨æˆåŠŸã—ãŸã€‚<br>ãŸã ã— description ãŒãªã„æ—¨ã® warning ãŒå‡ºã¦ã„ã‚‹ã€‚<br>table ã‚„ column ã® description ã‚„åˆ¶ç´„äº‹é …ã‚’è¿½åŠ ã—ã¦ datacontract_v3.yml ã¨ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#75715e>@@ -3,6 +3,9 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> info:
</span></span><span style=display:flex><span>   title: My Data Contract
</span></span><span style=display:flex><span>   version: 0.0.1
</span></span><span style=display:flex><span><span style=color:#a6e22e>+  description: |
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span> servers:
</span></span><span style=display:flex><span>   dev:
</span></span><span style=display:flex><span>     type: bigquery
</span></span><span style=display:flex><span><span style=color:#75715e>@@ -11,10 +14,18 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> models:
</span></span><span style=display:flex><span>   money_forward_main_group:
</span></span><span style=display:flex><span>     type: table
</span></span><span style=display:flex><span><span style=color:#a6e22e>+    description: MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›®
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>     fields:
</span></span><span style=display:flex><span>       mf_main_group_id:
</span></span><span style=display:flex><span><span style=color:#a6e22e>+        description: å¤§é …ç›® ID
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>         type: integer
</span></span><span style=display:flex><span><span style=color:#a6e22e>+        required: true
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+        primary: true
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+        unique: true
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>       name:
</span></span><span style=display:flex><span><span style=color:#a6e22e>+        description: å¤§é …ç›®ã®é …ç›®å
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>         type: string
</span></span><span style=display:flex><span><span style=color:#a6e22e>+        required: true
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>       is_income:
</span></span><span style=display:flex><span><span style=color:#a6e22e>+        description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>         type: boolean
</span></span></code></pre></div><p><code>lint</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒæˆåŠŸã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚</p><pre tabindex=0><code>$ datacontract lint datacontract_v3.yml          
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                    â”‚ Field â”‚ Details â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ passed â”‚ Data contract is syntactically valid     â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Field pattern is correct regex&#39;  â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Objects have descriptions&#39;       â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Field references existing field&#39; â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Example(s) match model&#39;          â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Fields use valid constraints&#39;    â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;Quality check(s) use model&#39;      â”‚       â”‚         â”‚
â”‚ passed â”‚ Linter &#39;noticePeriod in ISO8601 format&#39;  â”‚       â”‚         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸŸ¢ data contract is valid. Run 8 checks. Took 0.304237 seconds.
</code></pre><h3 id=åˆå›ãƒ†ã‚¹ãƒˆ>åˆå›ãƒ†ã‚¹ãƒˆ<a hidden class=anchor aria-hidden=true href=#åˆå›ãƒ†ã‚¹ãƒˆ>#</a></h3><p>æ¬¡ã« <code>test</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚<br>ã¡ãªã¿ã« <code>test</code> ã§ã¯ BiqQuery ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã€ç’°å¢ƒå¤‰æ•° <code>DATACONTRACT_BIGQUERY_ACCOUNT_INFO_JSON_PATH</code> ã«èªè¨¼æƒ…å ±ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract test datacontract_v3.yml
Testing datacontract_v3.yml
Column,Event,Details
is_income,:icon-fail: Type Mismatch, Expected Type: boolean; Actual Type: BOOL

Type Mismatch, Expected Type: boolean; Actual Type: BOOL
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                                            â”‚ Field            â”‚ Details                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ passed â”‚ Check that field mf_main_group_id is present                     â”‚                  â”‚                                                    â”‚
â”‚ passed â”‚ Check that field mf_main_group_id has type integer               â”‚                  â”‚                                                    â”‚
â”‚ passed â”‚ Check that field name is present                                 â”‚                  â”‚                                                    â”‚
â”‚ passed â”‚ Check that field name has type string                            â”‚                  â”‚                                                    â”‚
â”‚ passed â”‚ Check that field is_income is present                            â”‚                  â”‚                                                    â”‚
â”‚ failed â”‚ Check that field is_income has type boolean                      â”‚                  â”‚ Type Mismatch, Expected Type: boolean; Actual      â”‚
â”‚        â”‚                                                                  â”‚                  â”‚ Type: BOOL                                         â”‚
â”‚ passed â”‚ Check that required field mf_main_group_id has no null values    â”‚ mf_main_group_id â”‚                                                    â”‚
â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚                                                    â”‚
â”‚ passed â”‚ Check that required field name has no null values                â”‚ name             â”‚                                                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸ”´ data contract is invalid, found the following errors:
1) Type Mismatch, Expected Type: boolean; Actual Type: BOOL
</code></pre><p>ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚<br>column <code>is_income</code> ã®å‹ãŒ <code>boolean</code> ã§ã¯ãªã <code>BOOL</code> ã ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚<br>ç¢ºã‹ã« BiqQuery ã¨ã—ã¦ã®å‹ã¯ <code>BOOL</code> ã§ã‚ã‚‹ãŒã€ä¸€æ–¹ã§ data contracts ã®ä»•æ§˜ã¨ã—ã¦ã¯ <code>boolean</code> ã—ã‹æŒ‡å®šã§ããªã„ã€‚<br>ãƒã‚°ã£ã½ã„ã®ã§ã„ã£ãŸã‚“ <code>is_income</code> ã®å‹æŒ‡å®šã‚’ã¯ãšã—ã¦ãŠãâ€¦</p><p>å‡ºåŠ›ã•ã‚ŒãŸå†…å®¹ã‚’è¦‹ã‚‹ã¨ã©ã†ã„ã£ãŸã“ã¨ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‹ãŒã‚ã‹ã‚‹ã€‚<br>ã“ã®æ™‚ç‚¹ã§ã¯ column ã®å­˜åœ¨ãŠã‚ˆã³å‹ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã¦ã€ã•ã‚‰ã«åˆ¶ç´„äº‹é …ã‚’è¨˜è¼‰ã—ãŸ column ã«ã¤ã„ã¦ã¯ãã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã€‚</p><h3 id=ãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ >ãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ <a hidden class=anchor aria-hidden=true href=#ãƒ‡ãƒ¼ã‚¿ä¾‹ã®è¿½åŠ >#</a></h3><p>æ¬¡ã« data contract ã« <code>examples</code> ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã€‚<br>åå‰ã®ã¨ãŠã‚Šã§ãƒ‡ãƒ¼ã‚¿ã®ä¾‹ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚<br>ã¾ãš data contract ã‚’å®£è¨€ã—ã¦é–‹ç™ºã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€ä¾‹ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã¯ã¨ã¦ã‚‚åŠ©ã‹ã‚‹ã€‚</p><p>æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ datacontract_v4.yml ã‚’ä½œã£ãŸã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#75715e>@@ -28,4 +28,14 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>         required: true
</span></span><span style=display:flex><span>       is_income:
</span></span><span style=display:flex><span>         description: å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false
</span></span><span style=display:flex><span><span style=color:#f92672>-        type: boolean
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+        # type mismatch ã«ãªã‚‹ãƒã‚°ï¼ŸãŒã‚ã‚‹ãŸã‚ boolean å‹ã®ãƒã‚§ãƒƒã‚¯ã¯é™¤å¤–
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+        # type: boolean
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+examples:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  - type: csv
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    description: money_forward_main_group ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¾‹ã€‚
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    model: money_forward_main_group
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    data: |
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      mf_main_group_id,name,is_income
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      1,&#34;åå…¥&#34;,true
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      2,&#34;é£Ÿè²»&#34;,false
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      3,&#34;æ—¥ç”¨å“&#34;,false
</span></span></span></code></pre></div><p>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ <code>--examples</code> ã‚’ã¤ã‘ã¦ <code>test</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€<code>examples</code> ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract test --examples datacontract_v4.yml
Testing datacontract_v4.yml
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                                            â”‚ Field            â”‚ Details â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ passed â”‚ Check that field mf_main_group_id is present                     â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field name is present                                 â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field is_income is present                            â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that required field mf_main_group_id has no null values    â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that required field name has no null values                â”‚ name             â”‚         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸŸ¢ data contract is valid. Run 6 checks. Took 0.232013 seconds.
</code></pre><h3 id=ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ >ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ <a hidden class=anchor aria-hidden=true href=#ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã®è¿½åŠ >#</a></h3><p><code>quality</code> ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚<br>v0.10.3 ã®æ™‚ç‚¹ã§ã¯ <a href=https://docs.soda.io/soda-cl/soda-cl-overview.html>SodaCL</a>, <a href=https://docs.getmontecarlo.com/docs/monitors-as-code>Monte Carlo</a>, <a href=https://greatexpectations.io/expectations/>greate expectation</a> ã®è¨˜æ³•ã§å“è³ªãƒã‚§ãƒƒã‚¯ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹ã€‚</p><p>ã“ã“ã§ã¯ SodaCL ã®è¨˜æ³•ã§ table ã®è¡Œæ•°ãŒ1ä»¶ä»¥ä¸Šã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ç°¡å˜ãªãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ datacontract_v5.yml ã¨ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#75715e>@@ -39,3 +39,8 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       1,&#34;åå…¥&#34;,true
</span></span><span style=display:flex><span>       2,&#34;é£Ÿè²»&#34;,false
</span></span><span style=display:flex><span>       3,&#34;æ—¥ç”¨å“&#34;,false
</span></span><span style=display:flex><span><span style=color:#a6e22e>+quality:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  type: SodaCL
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  specification:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    checks for money_forward_main_group:
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      - row_count &gt; 0
</span></span></span></code></pre></div><p><code>examples</code> ã¨ BigQuery ãã‚Œãã‚Œã«å¯¾ã—ã¦ <code>test</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚</p><pre tabindex=0><code>$ datacontract test --examples datacontract_v5.yml
Testing datacontract_v5.yml
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                                            â”‚ Field            â”‚ Details â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ passed â”‚ Check that field mf_main_group_id is present                     â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field name is present                                 â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field is_income is present                            â”‚                  â”‚         â”‚
â”‚ passed â”‚ row_count &gt; 0                                                    â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that required field mf_main_group_id has no null values    â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that required field name has no null values                â”‚ name             â”‚         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸŸ¢ data contract is valid. Run 7 checks. Took 0.48302 seconds.
</code></pre><pre tabindex=0><code>$ datacontract test datacontract_v5.yml  
Testing datacontract_v5.yml
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Result â”‚ Check                                                            â”‚ Field            â”‚ Details â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ passed â”‚ Check that field mf_main_group_id is present                     â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field mf_main_group_id has type integer               â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field name is present                                 â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field name has type string                            â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that field is_income is present                            â”‚                  â”‚         â”‚
â”‚ passed â”‚ row_count &gt; 0                                                    â”‚                  â”‚         â”‚
â”‚ passed â”‚ Check that required field mf_main_group_id has no null values    â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that unique field mf_main_group_id has no duplicate values â”‚ mf_main_group_id â”‚         â”‚
â”‚ passed â”‚ Check that required field name has no null values                â”‚ name             â”‚         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸŸ¢ data contract is valid. Run 9 checks. Took 5.690055 seconds.
</code></pre><p>è¡Œæ•° (row_count) ã®ãƒã‚§ãƒƒã‚¯ãŒå¢—ãˆã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã€‚</p><p>ã“ã“ã¾ã§ã®ã¨ã“ã‚ã§ data contract (YAML) ã¯ã„ã£ãŸã‚“å®Œæˆã¨ã™ã‚‹ã€‚<br>ã“ã®æ™‚ç‚¹ã§ã®å…¨ä½“åƒã‚’è¨˜è¼‰ã—ã¦ãŠãã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>dataContractSpecification</span>: <span style=color:#ae81ff>0.9.3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>id</span>: <span style=color:#ae81ff>my-data-contract-id</span>
</span></span><span style=display:flex><span><span style=color:#f92672>info</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>title</span>: <span style=color:#ae81ff>My Data Contract</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>0.0.1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚</span>
</span></span><span style=display:flex><span><span style=color:#f92672>servers</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>dev</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>bigquery</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>project</span>: <span style=color:#ae81ff>&lt;PROJECT_ID&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataset</span>: <span style=color:#ae81ff>&lt;DATASET_ID&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>models</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>money_forward_main_group</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>table</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›®</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fields</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>mf_main_group_id</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›® ID</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>integer</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>primary</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>unique</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ã®é …ç›®å</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>is_income</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># type mismatch ã«ãªã‚‹ãƒã‚°ï¼ŸãŒã‚ã‚‹ãŸã‚ boolean å‹ã®ãƒã‚§ãƒƒã‚¯ã¯é™¤å¤–</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># type: boolean</span>
</span></span><span style=display:flex><span><span style=color:#f92672>examples</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>csv</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>money_forward_main_group ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¾‹ã€‚</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>model</span>: <span style=color:#ae81ff>money_forward_main_group</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>data</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      mf_main_group_id,name,is_income
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      1,&#34;åå…¥&#34;,true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      2,&#34;é£Ÿè²»&#34;,false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      3,&#34;æ—¥ç”¨å“&#34;,false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>quality</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>SodaCL</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>specification</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>checks for money_forward_main_group</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>row_count &gt; 0</span>
</span></span></code></pre></div><p>ã“ã“ã§ä½œã£ãŸ data contract ã¯ãƒ•ãƒ«ã®è¨˜è¼‰ã§ã¯ãªã„ã€‚<br>ä¾‹ãˆã° <code>servicelevels</code> ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ SLA ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚<br>data contract ã®ã™ã¹ã¦ã®ä»•æ§˜ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯<a href=https://github.com/datacontract/datacontract-specification>ä»•æ§˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚ç…§ã®ã“ã¨ã€‚</p><h3 id=export-ã‚’è©¦ã™>export ã‚’è©¦ã™<a hidden class=anchor aria-hidden=true href=#export-ã‚’è©¦ã™>#</a></h3><h4 id=json-schema>JSON Schema<a hidden class=anchor aria-hidden=true href=#json-schema>#</a></h4><p>data contract ãŒã§ããŸã¨ã“ã‚ã§ export ã‚’è©¦ã—ã¦ã„ããŸã„ã€‚<br>v0.10.3 ã§ã¯14ç¨®é¡ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¯¾ã—ã¦ã® export ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€ã“ã“ã§ã¯ãã®ã†ã¡ã®ã„ãã¤ã‹ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚</p><p>ã¾ãšã¯ <a href=https://json-schema.org/specification>JSON Schema</a> ã§å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract export --format jsonschema datacontract_v5.yml
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;$schema&#34;</span>: <span style=color:#e6db74>&#34;http://json-schema.org/draft-07/schema#&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;object&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;properties&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;mf_main_group_id&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;integer&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;unique&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;is_income&#34;</span>: {}
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;required&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;mf_main_group_id&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;name&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>JSON Schema ã®è¨˜æ³•ã§ãƒ¢ãƒ‡ãƒ«ãŒè¡¨ç¾ã•ã‚ŒãŸã‚‚ã®ãŒæ¨™æº–å‡ºåŠ›ã•ã‚ŒãŸã€‚<br>åŒæ§˜ã« Avro, Protobuf ãªã©ã®å½¢å¼ã§ã‚‚ export ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p><p>ãƒ‡ãƒ¼ã‚¿åŸºç›¤çš„ãªè©±ã‚’ã™ã‚‹ã¨ã€å–ã‚Šè¾¼ã¿ã®å¯¾è±¡ã§ã‚ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (data provider) ã‹ã‚‰é€ã‚‰ã‚Œã¦ãã‚‹ãƒ­ã‚°ã¯ JSON å½¢å¼ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚‹ã€‚<br>data contract ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã¨ãƒ‡ãƒ¼ã‚¿åŸºç›¤å´ã§åˆæ„ã—ã¦ãŠã‘ã°ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ãƒ­ã‚°ç”Ÿæˆæ™‚ã« JSON Schema ã§ãƒ­ã‚°ã« validation ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚<br>ã“ã‚Œã«ã‚ˆã‚Šãƒ­ã‚°ã® schema ã®æ„å›³ã—ãªã„å¤‰æ›´ã‚’é˜²ãé‹ç”¨ãŒå¯èƒ½ã«ãªã‚‹ã ã‚ã†ã€‚</p><h4 id=dbt>dbt<a hidden class=anchor aria-hidden=true href=#dbt>#</a></h4><p>dbt ã®å½¢å¼ã§ export ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚<br>dbt ã® YAML ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract export --format dbt --server bigquery datacontract_v5.yml
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>models</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>money_forward_main_group</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>meta</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>data_contract</span>: <span style=color:#ae81ff>my-data-contract-id</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>materialized</span>: <span style=color:#ae81ff>table</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>contract</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>enforced</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: <span style=color:#ae81ff>MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›®</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>columns</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>data_type</span>: <span style=color:#ae81ff>NUMBER</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›® ID</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>not_null</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>unique</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>mf_main_group_id</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>data_type</span>: <span style=color:#ae81ff>STRING</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ã®é …ç›®å</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>not_null</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>name</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>is_income</span>
</span></span></code></pre></div><p><code>data_type</code> ãŒå¾®å¦™ã§ BigQuery ã®å‹å®šç¾©ã«ãªã£ã¦ã„ãªã„ã€‚<br><code>--server bigquery</code> ã‚’ä¸ãˆã¦ã„ã‚‹ã®ã§é…æ…®ã—ã¦ã»ã—ã„ã¨ã“ã‚ã§ã¯ã‚ã‚‹ã€‚</p><p>sources ç”¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å½¢å¼ã§ã‚‚ export ã§ãã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract export --format dbt-sources --server bigquery datacontract_v5.yml
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>sources</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>my-data-contract-id</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tables</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>money_forward_main_group</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹å¤§é …ç›®</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>columns</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>tests</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>dbt_expectations.dbt_expectations.expect_column_values_to_be_of_type</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>column_type</span>: <span style=color:#ae81ff>NUMBER</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>not_null</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>unique</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›® ID</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>mf_main_group_id</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>tests</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>dbt_expectations.dbt_expectations.expect_column_values_to_be_of_type</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>column_type</span>: <span style=color:#ae81ff>STRING</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>not_null</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ã®é …ç›®å</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>name</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¤§é …ç›®ãŒåå…¥ã®å ´åˆã¯ true, æ”¯å‡ºã®å ´åˆã¯ false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>is_income</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;MoneyForward ã®åæ”¯ã«ãŠã‘ã‚‹åˆ†é¡ (é …ç›®)ã€‚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹åæ”¯è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã‚‹æƒ…å ±ã‚’å…ƒã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;</span>
</span></span></code></pre></div><p>staging ç”¨ã® SQL ã®å½¢å¼ã® export ã‚‚ã‚ã‚‹ã€‚</p><pre tabindex=0><code>$ datacontract export --format dbt-staging-sql --server bigquery datacontract_v5.yml
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>    <span style=color:#66d9ef>select</span> 
</span></span><span style=display:flex><span>        mf_main_group_id, name, is_income
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>from</span> <span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#66d9ef>source</span>(<span style=color:#e6db74>&#39;my-data-contract-id&#39;</span>, <span style=color:#e6db74>&#39;money_forward_main_group&#39;</span>) <span style=color:#960050;background-color:#1e0010>}}</span>
</span></span></code></pre></div><p>ã“ã®ã‚ˆã†ã«ã„ãã¤ã‹ã® dbt ã®å½¢å¼ã§å‡ºåŠ›ã§ãã‚‹ãŒã€å¾®å¦™ãªéƒ¨åˆ†ãŒã‚ã‚‹ã®ã§ã“ã®ã¾ã¾ data contract ã‚’ SSoT ã¨ã—ã¦ dbt ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ CI ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã¨ã„ã†é‹ç”¨ã¯ç¾æ™‚ç‚¹ã§ã¯é›£ã—ã„ã ã‚ã†ã€‚<br>ã¾ãŸãƒªãƒƒãƒãªãƒ†ã‚¹ãƒˆãªã©ã‚‚è¡¨ç¾ã§ããªã„ãŸã‚ã€dbt ã‚’ãŒã£ã¤ã‚Šä½¿ã£ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã«ã¯ç‰©è¶³ã‚Šãªã•ãŒã‚ã‚‹ã¨æ€ã‚ã‚Œã‚‹ã€‚<br>data contract ã‚’ã¾ãšä½œã‚Šã€ãã‚Œã‚’ã‚‚ã¨ã« dbt ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¨ãã®ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹ç”¨é€”ãªã‚‰ç¾æ™‚ç‚¹ã§ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œãªã„ã€‚</p><h4 id=html>HTML<a hidden class=anchor aria-hidden=true href=#html>#</a></h4><p>HTML å½¢å¼ã§ export ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚<br>ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ data contract ã‚’ web ã§è¦‹ã›ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã ã‚ã†ã€‚</p><pre tabindex=0><code>$ datacontract export --format html datacontract_v5.yml &gt; money_forward_main_group.html
</code></pre><figure class=align-center><img loading=lazy src=/image/data-contract-cli/datacontract_html.png#center alt="HTML ã§ã® export ä¾‹"><figcaption><p>HTML ã§ã® export ä¾‹</p></figcaption></figure><p>é ‘å¼µã‚Œã°ã“ã‚Œã§ data catalog ã‚’ä½œã‚‹ã“ã¨ã‚‚ã§ããã†ã€‚<br>ã¾ãŸä»Šå›ã® data contract ã«ã¯å«ã¾ã‚Œã¦ã„ãªã„ãŒã€å‰è¿°ã® <code>servicelevels</code> ãƒ–ãƒ­ãƒƒã‚¯ãŒã‚ã‚Œã° web ä¸Šã§ SLA ã‚’ç¤ºã›ãŸã‚Šã§ãã¦è‰¯ã•ãã†ã ã€‚</p><h2 id=è€ƒå¯Ÿ>è€ƒå¯Ÿ<a hidden class=anchor aria-hidden=true href=#è€ƒå¯Ÿ>#</a></h2><p>Data Contract CLI ã§ä½•ãŒã§ãã‚‹ã‹ãŒã‚ã‹ã£ãŸã¨ã“ã‚ã§æœ€åˆã®å›³ã‚’å†æ²ã€‚</p><blockquote><figure class=align-center><img loading=lazy src=/image/data-contract-cli/datacontractcli.png#center alt="datacontract/datacontract-cli ã‚ˆã‚Š"><figcaption><p><a href=https://github.com/datacontract/datacontract-cli/tree/v0.10.1>datacontract/datacontract-cli</a> ã‚ˆã‚Š</p></figcaption></figure></blockquote><p>ã“ã®å›³ã‹ã‚‰ Data Contract CLI ã¨ã—ã¦ã¯ data contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãªé‹ç”¨ã‚’è€ƒãˆã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚<br>ã¾ãš data provider ã¨ data consumer ã®åˆæ„ã®ã‚‚ã¨ã«å®£è¨€çš„ã« data contracts ã‚’ä½œæˆã™ã‚‹ã€‚<br>ãã‚Œã«åŸºã¥ãã€ãã‚Œãã‚Œ data provider ã¨ data consumer ã§ä½¿ã‚ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ç”¨ã« data contracts ã‹ã‚‰å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ã„ãã€‚<br>ä¾‹ãˆã° data provider ã§ã‚ã‚‹ application å‘ã‘ã«ã¯ãƒ­ã‚°ã® validation ç”¨ã« JSON Schema ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚<br>data consumer ã§ã‚ã‚‹ DWH å‘ã‘ã«ã¯ dbt ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€ãªã©ã€‚</p><p>ã¾ãŸã€data contract ã«è¨˜è¼‰ã®æƒ…å ±ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚<br>ç°¡å˜ãª column ã®åˆ¶ç´„ã‹ã‚‰ã€SodaCL ãªã©ã‚’ä½¿ã£ãŸã‚ˆã‚Šé«˜åº¦ãªå“è³ªãƒã‚§ãƒƒã‚¯ã¾ã§ã€‚<br>ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ data contract ã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹ã€‚</p><p>ã“ã®ã‚ˆã†ã«ã¾ãš data contract ã‚ã‚Šãã§ã€ãƒ¢ãƒ‡ãƒ«ã®ãƒ¡ã‚¿æƒ…å ±ã¨ã—ã¦ã¯ãã‚Œã‚’ SSoT ã¨ã—ã€data provider / consumer ã§å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ CI ã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã¨ã„ã†æœªæ¥ãŒè¦‹ãˆã¦ãã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€‚<br>ãŸã ã—ãã®æœªæ¥ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®èª²é¡Œã‚‚ç¾çŠ¶ã§ã¯å¤šã„ã€‚<br>Data Contract CLI ã®ç›¸äº’é‹ç”¨æ€§ (interoperatbility) ãŒæœ€ã‚‚å¤§ããªãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‹ã ã‚ã†ã€‚<br>ä¾‹ãˆã°æƒ³å®šã™ã‚‹ dbt ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¸€ç™ºã§ä½œã‚Œã‚‹ã‹ã€package ã‚’ä½¿ã£ãŸãƒªãƒƒãƒãªãƒ†ã‚¹ãƒˆãŒæ›¸ã‘ã‚‹ã‹ã€etc.</p><p>ãã‚‚ãã‚‚å‰è¿°ã—ãŸã‚ˆã†ã«ãƒã‚°ã£ã½ã„æŒ™å‹•ã‚„å¾®å¦™ãªæŒ™å‹•ã‚‚ã‚ã‚Šã€ã“ã®ãƒ„ãƒ¼ãƒ«è‡ªä½“ãŒã¾ã ç™ºå±•é€”ä¸Šã¨ã„ã†æ„ŸãŒã‚ã‚‹ã€‚<br>ã“ã‚Œã‹ã‚‰æ™®åŠã—ã¦ã„ãã‹ã¨ã„ã†ã®ã¯ä»Šã®ã¨ã“ã‚ä½•ã¨ã‚‚è¨€ãˆãªã„ã€‚<br>ã¡ãªã¿ã«ä½œè€…ã®1äººã¯ <a href=https://datamesh-manager.com/>Data Mesh Manager</a> ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ¶ä½œè€…ã§ã‚ã‚Šã€(ã“ã“ã¾ã§ã®ã¨ã“ã‚ã§ã¯è§¦ã‚Œã¦ã„ãªã‹ã£ãŸãŒ) Data Contract CLI ã«ã¯ã“ã® Data Mesh Manager ã¨ã®é€£æºæ©Ÿèƒ½ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã€‚<br>data contract ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ä¸–ç•Œã®ãƒ“ã‚¸ãƒ§ãƒ³ã¯ã¨ã¦ã‚‚é¢ç™½ã„ã¨æ€ã£ãŸã®ã§ã€ã„ã„æ–¹å‘ã§ãƒ„ãƒ¼ãƒ«ãŒç™ºå±•ã—ã¦ã„ãã¨ã†ã‚Œã—ã„ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://soonraah.github.io/tags/data-contracts/>Data Contracts</a></li></ul><nav class=paginav><a class=prev href=https://soonraah.github.io/posts/dmbok-chapter-13/><span class=title>Â« å‰ã¸</span><br><span>èª­æ›¸ãƒ¡ãƒ¢: DMBOK2 ç¬¬13ç«  ãƒ‡ãƒ¼ã‚¿å“è³ª</span>
</a><a class=next href=https://soonraah.github.io/posts/dmbok-chapter-8/><span class=title>æ¬¡ã¸ Â»</span><br><span>èª­æ›¸ãƒ¡ãƒ¢: DMBOK2 ç¬¬8ç«  ãƒ‡ãƒ¼ã‚¿çµ±åˆã¨ç›¸äº’é‹ç”¨æ€§</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on x" href="https://x.com/intent/tweet/?text=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5&amp;url=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f&amp;hashtags=datacontracts"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f&amp;title=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5&amp;summary=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5&amp;source=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f&title=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on whatsapp" href="https://api.whatsapp.com/send?text=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5%20-%20https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on telegram" href="https://telegram.me/share/url?text=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5&amp;url=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Data Contract CLI ã‹ã‚‰è€ƒãˆã‚‹ Data Contracts ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æœªæ¥ on ycombinator" href="https://news.ycombinator.com/submitlink?t=Data%20Contract%20CLI%20%e3%81%8b%e3%82%89%e8%80%83%e3%81%88%e3%82%8b%20Data%20Contracts%20%e3%83%95%e3%82%a1%e3%83%bc%e3%82%b9%e3%83%88%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%91%e3%82%a4%e3%83%97%e3%83%a9%e3%82%a4%e3%83%b3%e3%81%ae%e6%9c%aa%e6%9d%a5&u=https%3a%2f%2fsoonraah.github.io%2fposts%2fdata-contract-cli%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://soonraah.github.io/>Froglog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="ã‚³ãƒ”ãƒ¼";function s(){t.innerHTML="ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸ!",setTimeout(()=>{t.innerHTML="ã‚³ãƒ”ãƒ¼"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>